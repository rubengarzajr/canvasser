<!DOCTYPE html>

<script>
window.onload = function () {
  var form         = document.getElementById('file-form');
  var fileSelect   = document.getElementById('file-select');
  var uploadButton = document.getElementById('submit-button');


  form.onsubmit = function(event) {
    event.preventDefault();
    uploadButton.value = 'Uploading...';

    var files = fileSelect.files;
    console.log('files');
    console.log(files);

    var formData = new FormData();

    for (var i = 0; i < files.length; i++) {
      var file = files[i];
      formData.append('fileToUpload', file, file.name);
    }

    for (var pair of formData.entries()) {
      console.log(pair[0]+ ', ' + pair[1]);
    }

    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'upload.php', true);
    // Set up a handler for when the request finishes.
    xhr.onload = function () {
      if (xhr.status === 200) {
        // File(s) uploaded.
        uploadButton.innerHTML = 'Upload';
        document.getElementById('result').innerHTML = xhr.responseText;
      } else {
        alert('An error occurred!');
      }
    };
    xhr.send(formData);

  }
 }
</script>
<html>
<body>

<form id="file-form" action="upload.php" method="POST" enctype="multipart/form-data">
    Select image to upload:
    <input type="file"   id="file-select"   multiple/>
    <input type="submit" id="submit-button" value="Upload File" >
</form>

<div id="result"></div>

</body>
</html>
